{% extends 'base.html' %}

{% block title %}Portal de Vagas - Sistema de Monitoria{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
    <!-- Header Minimalista -->
    <div class="text-center mb-5">
        <h1 class="portal-title">
            <i class="fas fa-briefcase me-2"></i>Portal de Vagas de Monitoria
        </h1>
        <p class="portal-subtitle">Encontre vagas de monitoria disponíveis e candidate-se!</p>
    </div>

    <!-- Filtros Compactos -->
    <div class="filter-card mb-4">
        <form method="get" class="row g-3 align-items-end">
            <div class="col-md-9">
                <label for="curso" class="form-label filter-label">Filtrar por Curso</label>
                <select name="curso" id="curso" class="form-select form-select-sm">
                    <option value="">Todos os Cursos</option>
                    {% for curso in cursos %}
                    <option value="{{ curso.id }}">{{ curso.nome }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-3 d-flex gap-2">
                <button type="submit" class="btn btn-primary btn-sm flex-fill">
                    <i class="fas fa-filter"></i> Filtrar
                </button>
                <a href="{% url 'portal_vagas' %}" class="btn btn-outline-secondary btn-sm">
                    <i class="fas fa-redo"></i> Limpar
                </a>
            </div>
        </form>
    </div>

    <!-- Lista de Vagas - Grid Limpo -->
    <div class="row g-4">
        {% for vaga in vagas %}
        <div class="col-lg-6">
            <div class="vaga-card">
                <!-- Header do Card -->
                <div class="vaga-header">
                    <div class="vaga-title-section">
                        <h5 class="vaga-title">{{ vaga.nome }}</h5>
                        <span class="vaga-course">{{ vaga.curso.nome }}</span>
                    </div>
                    <div class="vaga-badge">
                        {% if vaga.vagas_disponiveis > 0 %}
                        <span class="badge-available">{{ vaga.vagas_disponiveis }} vagas</span>
                        {% else %}
                        <span class="badge-full">Esgotada</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Body do Card -->
                <div class="vaga-body">
                    <div class="vaga-info-grid">
                        <div class="info-item">
                            <i class="fas fa-book-open text-muted"></i>
                            <span class="info-label">Disciplina:</span>
                            <span class="info-value">{{ vaga.disciplina|default:"Não especificada" }}</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-user-tie text-muted"></i>
                            <span class="info-label">Coordenador:</span>
                            <span class="info-value">{{ vaga.coordenador.nome }}</span>
                        </div>
                    </div>

                    <!-- Estatísticas Compactas -->
                    <div class="vaga-stats">
                        <div class="stat-item">
                            <span class="stat-number">{{ vaga.numero_vagas }}</span>
                            <span class="stat-label">Total</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number text-success">{{ vaga.vagas_disponiveis }}</span>
                            <span class="stat-label">Disponíveis</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number text-info">{{ vaga.total_inscritos }}</span>
                            <span class="stat-label">Inscritos</span>
                        </div>
                    </div>

                    <!-- Descrição Resumida -->
                    <div class="vaga-description">
                        <p class="description-text">{{ vaga.descricao|truncatewords:15 }}</p>
                    </div>

                    <!-- Requisitos Tag -->
                    <div class="vaga-requirements">
                        <i class="fas fa-check-circle me-1" style="color: var(--cor-azul-claro);"></i>
                        <small>{{ vaga.requisitos|truncatewords:12 }}</small>
                    </div>
                </div>

                <!-- Footer com Ações -->
                <div class="vaga-footer">
                    <button class="btn-action btn-detail" onclick="abrirModalDetalhes({{ vaga.id }})">
                        <i class="fas fa-info-circle"></i> Detalhes
                    </button>
                    {% if vaga.vagas_disponiveis > 0 %}
                    <a href="{% url 'candidatar_vaga' vaga.id %}" class="btn-action btn-apply">
                        <i class="fas fa-user-plus"></i> Candidatar-se
                    </a>
                    {% else %}
                    <button class="btn-action btn-disabled" disabled>
                        <i class="fas fa-times"></i> Esgotada
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="empty-state">
                <i class="fas fa-inbox fa-3x mb-3"></i>
                <h5>Nenhuma vaga disponível no momento</h5>
                <p>Volte em breve para conferir novas oportunidades!</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Link para Minhas Inscrições -->
    <div class="text-center mt-5">
        <a href="{% url 'minhas_inscricoes' %}" class="btn btn-outline-primary">
            <i class="fas fa-clipboard-list me-2"></i>Ver Minhas Inscrições
        </a>
    </div>
</div>

<style>
/* ========== HEADER ========== */
.portal-title {
    font-size: 2rem;
    font-weight: 700;
    color: #2c3e50;
    margin-bottom: 0.5rem;
}

.portal-subtitle {
    font-size: 1rem;
    color: #7f8c8d;
    margin: 0;
}

/* ========== FILTROS ========== */
.filter-card {
    background: #ffffff;
    border: 1px solid #e0e6ed;
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
}

.filter-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #4a5568;
    margin-bottom: 0.5rem;
}

/* ========== CARDS DE VAGA ========== */
.vaga-card {
    background: #ffffff;
    border: 1px solid #e0e6ed;
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.vaga-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    border-color: #3b82f6;
}

/* Header do Card */
.vaga-header {
    background: linear-gradient(135deg, #003366 0%, #005599 100%);
    padding: 1.25rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.vaga-title-section {
    flex: 1;
}

.vaga-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: #ffffff;
    margin: 0 0 0.5rem 0;
    line-height: 1.3;
}

.vaga-course {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
}

.vaga-badge {
    margin-left: 1rem;
}

.badge-available {
    background: #10b981;
    color: white;
    padding: 0.375rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
}

.badge-full {
    background: #ef4444;
    color: white;
    padding: 0.375rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Body do Card */
.vaga-body {
    padding: 1.25rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.vaga-info-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.info-item i {
    font-size: 0.875rem;
    width: 16px;
}

.info-label {
    font-weight: 600;
    color: #64748b;
}

.info-value {
    color: #334155;
}

/* Estatísticas */
.vaga-stats {
    display: flex;
    gap: 1.5rem;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 8px;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
}

.stat-number {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    line-height: 1;
}

.stat-label {
    font-size: 0.75rem;
    color: #64748b;
    margin-top: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Descrição */
.vaga-description {
    flex: 1;
}

.description-text {
    font-size: 0.875rem;
    color: #64748b;
    line-height: 1.5;
    margin: 0;
}

/* Requisitos */
.vaga-requirements {
    font-size: 0.8125rem;
    padding: 0.75rem;
    background: rgba(18, 69, 255, 0.08);
    border-left: 3px solid var(--cor-azul-claro);
    border-radius: 4px;
    color: var(--cor-azul-escuro);
}

/* Footer do Card */
.vaga-footer {
    padding: 1rem 1.25rem;
    background: #f8fafc;
    display: flex;
    gap: 0.75rem;
    border-top: 1px solid #e0e6ed;
}

.btn-action {
    flex: 1;
    padding: 0.625rem 1rem;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 600;
    text-align: center;
    text-decoration: none;
    transition: all 0.2s ease;
    border: none;
    cursor: pointer;
}

.btn-detail {
    background: #ffffff;
    color: #3b82f6;
    border: 1.5px solid #3b82f6;
}

.btn-detail:hover {
    background: #3b82f6;
    color: #ffffff;
}

.btn-apply {
    background: #10b981;
    color: #ffffff;
}

.btn-apply:hover {
    background: #059669;
}

.btn-disabled {
    background: #e5e7eb;
    color: #9ca3af;
    cursor: not-allowed;
}

/* ========== EMPTY STATE ========== */
.empty-state {
    text-align: center;
    padding: 4rem 2rem;
    background: #ffffff;
    border: 2px dashed #e0e6ed;
    border-radius: 16px;
}

.empty-state i {
    color: #cbd5e1;
}

.empty-state h5 {
    color: #64748b;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

.empty-state p {
    color: #94a3b8;
    margin: 0;
}

/* ========== RESPONSIVE ========== */
    @media (max-width: 768px) {
        .portal-title {
            font-size: 1.5rem;
        }
        
        .vaga-header {
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .vaga-badge {
            margin-left: 0;
        }
        
        .vaga-stats {
            gap: 1rem;
        }
        
        .stat-number {
            font-size: 1.25rem;
        }
        
        .vaga-footer {
            flex-direction: column;
        }
    }
</style>

<!-- ========== MODAL DE DETALHES DA VAGA ========== -->
<div class="modal fade" id="modalDetalhesVaga" tabindex="-1" aria-labelledby="modalDetalhesLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content modal-vaga-content">
            <!-- Header do Modal - Limpo e Minimalista -->
            <div class="modal-header modal-vaga-header">
                <div class="modal-header-content">
                    <h5 class="modal-title" id="modalDetalhesLabel">
                        <span id="modal-vaga-nome"></span>
                    </h5>
                    <small class="modal-subtitle" id="modal-vaga-curso"></small>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            
            <!-- Body do Modal -->
            <div class="modal-body modal-vaga-body">
                <!-- Carregando -->
                <div id="modal-loading" class="modal-loading-container">
                    <div class="spinner-border spinner-border-sm text-primary" role="status">
                        <span class="visually-hidden">Carregando...</span>
                    </div>
                    <span class="ms-2">Carregando detalhes...</span>
                </div>
                
                <!-- Conteúdo -->
                <div id="modal-content" style="display: none;">
                    <!-- Grid de Informações -->
                    <div class="modal-info-grid">
                        <div class="modal-info-item">
                            <span class="modal-info-label">Disciplina</span>
                            <span class="modal-info-value" id="modal-disciplina"></span>
                        </div>
                        <div class="modal-info-item">
                            <span class="modal-info-label">Coordenador</span>
                            <span class="modal-info-value" id="modal-coordenador"></span>
                        </div>
                    </div>
                    
                    <!-- Divider -->
                    <div class="modal-divider"></div>
                    
                    <!-- Cards de Vagas - Design Clean -->
                    <div class="modal-vagas-cards">
                        <div class="modal-vaga-card">
                            <div class="modal-vaga-card-number" id="modal-numero-vagas"></div>
                            <div class="modal-vaga-card-label">Total de Vagas</div>
                        </div>
                        <div class="modal-vaga-card modal-vaga-card-available">
                            <div class="modal-vaga-card-number" id="modal-vagas-disponiveis"></div>
                            <div class="modal-vaga-card-label">Disponíveis</div>
                        </div>
                        <div class="modal-vaga-card modal-vaga-card-inscribed">
                            <div class="modal-vaga-card-number" id="modal-total-inscritos"></div>
                            <div class="modal-vaga-card-label">Inscritos</div>
                        </div>
                    </div>
                    
                    <!-- Divider -->
                    <div class="modal-divider"></div>
                    
                    <!-- Descrição -->
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-book-open"></i> Descrição
                        </h6>
                        <p class="modal-section-text" id="modal-descricao"></p>
                    </div>
                    
                    <!-- Requisitos -->
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-check-circle" style="color: var(--cor-azul-claro);"></i> Requisitos
                        </h6>
                        <p class="modal-section-text" id="modal-requisitos"></p>
                    </div>
                    
                    <!-- Responsabilidades -->
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-tasks"></i> Responsabilidades
                        </h6>
                        <p class="modal-section-text" id="modal-responsabilidades"></p>
                    </div>
                </div>
            </div>
            
            <!-- Footer do Modal - Ações -->
            <div class="modal-footer modal-vaga-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    Fechar
                </button>
                <button type="button" class="btn btn-primary" id="btn-candidatar" style="display: none;">
                    <i class="fas fa-paper-plane me-2"></i>Candidatar-se
                </button>
                <button type="button" class="btn btn-secondary" id="btn-esgotada" style="display: none;" disabled>
                    <i class="fas fa-check-circle me-2"></i>Vagas Esgotadas
                </button>
            </div>
        </div>
    </div>
</div>

<style>
/* ========== MODAL DE DETALHES - DESIGN CLEAN & PROFISSIONAL ========== */

/* Cores Institucionais */
:root {
    --cor-azul-escuro: #002555;
    --cor-azul-claro: #1245FF;
    --cor-amarelo: #F5AC00;
    --cor-off-white: #fafaf8;
    --cor-cinza-claro: #f8f9fa;
    --cor-cinza-texto: #64748b;
    --cor-texto-primario: #1e293b;
}

/* Content do Modal */
.modal-vaga-content {
    border: none;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 37, 85, 0.15);
    overflow: hidden;
}

/* Header do Modal - Minimalista */
.modal-vaga-header {
    background: #ffffff;
    border-bottom: 2px solid #e2e8f0;
    padding: 1.5rem;
}

.modal-header-content {
    flex: 1;
}

.modal-vaga-header .modal-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--cor-azul-escuro);
    margin-bottom: 0.375rem;
}

.modal-subtitle {
    font-size: 0.875rem;
    color: var(--cor-cinza-texto);
    font-weight: 500;
}

/* Body do Modal */
.modal-vaga-body {
    padding: 2rem;
    background: #ffffff;
    max-height: 65vh;
    overflow-y: auto;
}

/* Loading Container */
.modal-loading-container {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    color: var(--cor-cinza-texto);
    font-size: 0.9375rem;
}

/* Grid de Informações */
.modal-info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.modal-info-item {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
}

.modal-info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--cor-cinza-texto);
}

.modal-info-value {
    font-size: 0.9375rem;
    color: var(--cor-texto-primario);
    font-weight: 500;
}

/* Divider */
.modal-divider {
    height: 1px;
    background: #e2e8f0;
    margin: 1.5rem 0;
}

/* Cards de Vagas - Design Clean */
.modal-vagas-cards {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.modal-vaga-card {
    padding: 1.5rem 1rem;
    background: var(--cor-cinza-claro);
    border-radius: 12px;
    text-align: center;
    border: 1px solid #e2e8f0;
    transition: all 0.3s ease;
}

.modal-vaga-card:hover {
    border-color: var(--cor-azul-escuro);
    background: #ffffff;
}

.modal-vaga-card-number {
    font-size: 2rem;
    font-weight: 700;
    color: var(--cor-azul-escuro);
    line-height: 1;
    margin-bottom: 0.5rem;
}

.modal-vaga-card-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--cor-cinza-texto);
}

/* Card de Vagas Disponíveis - Verde */
.modal-vaga-card-available .modal-vaga-card-number {
    color: #10b981;
}

.modal-vaga-card-available {
    background: rgba(16, 185, 129, 0.08);
    border-color: rgba(16, 185, 129, 0.2);
}

/* Card de Inscritos - Azul */
.modal-vaga-card-inscribed .modal-vaga-card-number {
    color: var(--cor-azul-claro);
}

.modal-vaga-card-inscribed {
    background: rgba(18, 69, 255, 0.08);
    border-color: rgba(18, 69, 255, 0.2);
}

/* Seções de Conteúdo */
.modal-section {
    margin-bottom: 1.5rem;
}

.modal-section-title {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--cor-azul-escuro);
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.modal-section-title i {
    font-size: 1rem;
    color: var(--cor-amarelo);
}

.modal-section-text {
    font-size: 0.9375rem;
    color: var(--cor-texto-primario);
    line-height: 1.6;
    margin: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/* Footer do Modal */
.modal-vaga-footer {
    background: #ffffff;
    border-top: 1px solid #e2e8f0;
    padding: 1rem 1.5rem;
    gap: 0.75rem;
}

/* Botões do Modal */
.modal-vaga-footer .btn {
    font-weight: 600;
    font-size: 0.9375rem;
    padding: 0.625rem 1.25rem;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.modal-vaga-footer .btn-outline-secondary {
    color: var(--cor-azul-escuro);
    border-color: #e2e8f0;
}

.modal-vaga-footer .btn-outline-secondary:hover {
    background: var(--cor-cinza-claro);
    color: var(--cor-azul-escuro);
    border-color: var(--cor-azul-escuro);
}

.modal-vaga-footer .btn-primary {
    background: var(--cor-azul-escuro);
    border-color: var(--cor-azul-escuro);
    color: #ffffff;
}

.modal-vaga-footer .btn-primary:hover {
    background: var(--cor-azul-claro);
    border-color: var(--cor-azul-claro);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(18, 69, 255, 0.25);
}

.modal-vaga-footer .btn-secondary:disabled {
    background: #cbd5e1;
    border-color: #cbd5e1;
    color: #ffffff;
}

/* Scrollbar Customizado */
.modal-vaga-body::-webkit-scrollbar {
    width: 6px;
}

.modal-vaga-body::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
}

.modal-vaga-body::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 10px;
}

.modal-vaga-body::-webkit-scrollbar-thumb:hover {
    background: var(--cor-azul-escuro);
}

/* Animações */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

#modal-content {
    animation: fadeIn 0.3s ease;
}

/* Responsivo - Tablet */
@media (max-width: 768px) {
    .modal-vaga-header {
        padding: 1.25rem;
    }
    
    .modal-vaga-body {
        padding: 1.5rem;
        max-height: 70vh;
    }
    
    .modal-info-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .modal-vagas-cards {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.75rem;
    }
    
    .modal-vaga-card {
        padding: 1rem;
    }
    
    .modal-vaga-card-number {
        font-size: 1.5rem;
    }
    
    .modal-vaga-footer {
        flex-wrap: wrap;
        padding: 1rem;
    }
    
    .modal-vaga-footer .btn {
        font-size: 0.875rem;
        padding: 0.5rem 1rem;
    }
}

/* Responsivo - Mobile */
@media (max-width: 576px) {
    .modal-dialog {
        margin: 1rem;
    }
    
    .modal-vaga-header {
        padding: 1rem;
    }
    
    .modal-vaga-header .modal-title {
        font-size: 1.25rem;
    }
    
    .modal-vaga-body {
        padding: 1rem;
        max-height: 75vh;
    }
    
    .modal-vagas-cards {
        grid-template-columns: 1fr;
    }
    
    .modal-section-title {
        font-size: 0.875rem;
    }
    
    .modal-section-text {
        font-size: 0.875rem;
    }
    
    .modal-vaga-footer {
        padding: 0.75rem;
    }
    
    .modal-vaga-footer .btn {
        width: 100%;
        font-size: 0.8125rem;
        padding: 0.5rem 0.75rem;
    }
}
</style>

<!-- Script para carregar e exibir detalhes -->
<script>
    function abrirModalDetalhes(vagaId) {
        // Mostrar modal
        const modal = new bootstrap.Modal(document.getElementById('modalDetalhesVaga'));
        modal.show();
        
        // Mostrar loading
        document.getElementById('modal-loading').style.display = 'block';
        document.getElementById('modal-content').style.display = 'none';
        
        // Resetar botão de candidatura
        document.getElementById('btn-candidatar').style.display = 'none';
        document.getElementById('btn-esgotada').style.display = 'none';
        
        // Carregar detalhes via API
        fetch(`/api/vagas/${vagaId}/detalhes/`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao carregar detalhes');
                }
                return response.json();
            })
            .then(data => {
                // Preencher dados no modal
                document.getElementById('modal-vaga-nome').textContent = data.nome;
                document.getElementById('modal-vaga-curso').textContent = data.curso;
                document.getElementById('modal-disciplina').textContent = data.disciplina;
                document.getElementById('modal-coordenador').textContent = data.coordenador;
                document.getElementById('modal-numero-vagas').textContent = data.numero_vagas;
                document.getElementById('modal-vagas-disponiveis').textContent = data.vagas_disponiveis;
                document.getElementById('modal-total-inscritos').textContent = data.total_inscritos;
                document.getElementById('modal-descricao').textContent = data.descricao;
                document.getElementById('modal-requisitos').textContent = data.requisitos;
                document.getElementById('modal-responsabilidades').textContent = data.responsabilidades;
                
                // Configurar botão de candidatura
                const btnCandidatar = document.getElementById('btn-candidatar');
                const btnEsgotada = document.getElementById('btn-esgotada');
                
                if (data.vagas_disponiveis > 0) {
                    btnCandidatar.style.display = 'inline-block';
                    btnCandidatar.onclick = function() {
                        window.location.href = `/vagas/${vagaId}/candidatar/`;
                    };
                } else {
                    btnEsgotada.style.display = 'inline-block';
                }
                
                // Esconder loading e mostrar conteúdo
                document.getElementById('modal-loading').style.display = 'none';
                document.getElementById('modal-content').style.display = 'block';
            })
            .catch(error => {
                console.error('Erro:', error);
                document.getElementById('modal-loading').innerHTML = 
                    '<div class="alert alert-danger">❌ Erro ao carregar detalhes da vaga</div>';
            });
    }
</script>
{% endblock %}