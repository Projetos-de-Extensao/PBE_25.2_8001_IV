{% extends 'base.html' %}
{% block title %}Turmas - Plataforma Casa{% endblock %}

{% block extra_css %}
<style>
    /* ===== DESKTOP - Mostrar tabela, esconder cards ===== */
    .desktop-table {
        display: block;
    }
    .mobile-cards {
        display: none;
    }
    
    /* Breadcrumb */
    .breadcrumb {
        font-size: 0.875rem;
        padding: 0.75rem 0;
        margin-bottom: 1rem;
    }
    
    /* Cabeçalho */
    .d-flex.justify-content-between {
        margin-bottom: 1.5rem;
    }
    
    .page-title h1 {
        font-size: 1.5rem;
        margin-bottom: 0;
        line-height: 1.2;
        color: #002555;
        font-weight: 700;
    }
    
    /* Tabela compacta */
    .table {
        font-size: 0.875rem;
    }
    
    .table th {
        font-weight: 600;
        color: #002555;
        background-color: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        padding: 0.75rem;
        font-size: 0.8125rem;
    }
    
    .table td {
        padding: 0.75rem;
        vertical-align: middle;
    }
    
    .table td strong {
        color: #002555;
        font-size: 0.9375rem;
    }
    
    .table td small {
        font-size: 0.75rem;
    }
    
    /* ===== MOBILE - Esconder tabela, mostrar cards ===== */
    @media (max-width: 768px) {
        .desktop-table {
            display: none !important;
        }
        
        .mobile-cards {
            display: block;
        }
        
        /* Breadcrumb menor */
        .breadcrumb {
            font-size: 0.75rem;
            padding: 0.5rem 0;
            margin-bottom: 0.75rem;
        }
        
        /* Cabeçalho compacto */
        .d-flex.justify-content-between {
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .page-title {
            padding-top: 2.5rem;
        }
        
        .page-title h1 {
            font-size: 1.25rem;
        }
        
        .page-title h1 i {
            font-size: 1rem;
        }
        
        /* Botão Nova Turma full width */
        .btn-primary {
            width: 100%;
            font-size: 0.875rem;
            padding: 0.625rem 1rem;
        }
        
        /* Cards de Turma - Mobile */
        .turma-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
        }
        
        .turma-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding-bottom: 0.625rem;
            margin-bottom: 0.625rem;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .turma-header strong {
            font-size: 0.9375rem;
            color: #002555;
            font-weight: 600;
            flex: 1;
            line-height: 1.3;
        }
        
        .turma-header .badge {
            font-size: 0.6875rem;
            padding: 0.25rem 0.5rem;
            margin-left: 0.5rem;
        }
        
        .turma-body {
            margin-bottom: 0.75rem;
        }
        
        .turma-info {
            display: flex;
            justify-content: space-between;
            padding: 0.375rem 0;
            font-size: 0.8125rem;
            line-height: 1.4;
        }
        
        .info-label {
            font-weight: 600;
            color: #6c757d;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        
        .info-value {
            color: #002555;
            text-align: right;
            flex: 1;
            margin-left: 0.5rem;
        }
        
        .turma-actions {
            display: flex;
            gap: 0.375rem;
            padding-top: 0.75rem;
            border-top: 1px solid #f0f0f0;
        }
        
        .turma-actions .btn {
            flex: 1;
            font-size: 0.75rem;
            padding: 0.5rem 0.375rem;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
        }
        
        .turma-actions .btn i {
            font-size: 0.75rem;
        }
        
        /* Status badges */
        .status-active {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        /* Empty state */
        .mobile-cards .text-center {
            padding: 3rem 1rem;
        }
        
        .mobile-cards .text-center i {
            color: #dee2e6;
            margin-bottom: 1rem;
        }
        
        .mobile-cards .text-center p {
            color: #6c757d;
            font-size: 0.875rem;
            margin: 0;
        }
    }
    
    /* ===== TABLET (576px - 768px) ===== */
    @media (min-width: 576px) and (max-width: 768px) {
        .desktop-table {
            display: block !important;
        }
        
        .mobile-cards {
            display: none !important;
        }
        
        .table {
            font-size: 0.8125rem;
        }
        
        .table th {
            font-size: 0.75rem;
            padding: 0.625rem 0.5rem;
        }
        
        .table td {
            padding: 0.625rem 0.5rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
        <li class="breadcrumb-item active">Turmas</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
    <div class="page-title">
        <h1><i class="fas fa-chalkboard"></i> Turmas de Monitoria</h1>
    </div>
    <a href="{% url 'criar_turma' %}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Nova Turma
    </a>
</div>

<!-- Desktop Table -->
<div class="card desktop-table">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Monitor</th>
                        <th>Sala</th>
                        <th>Período</th>
                        <th>Horário</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for turma in turmas %}
                        <tr>
                            <td>
                                <strong>{{ turma.nome }}</strong><br>
                                <small class="text-muted">{{ turma.monitor.nome }}</small>
                            </td>
                            <td>{{ turma.sala.numero }}</td>
                            <td>{{ turma.data_inicio|date:"d/m/Y" }} até {{ turma.data_fim|date:"d/m/Y" }}</td>
                            <td>{{ turma.horario }}</td>
                            <td>
                                <span class="badge {% if turma.ativo %}status-active{% else %}status-inactive{% endif %}">
                                    {% if turma.ativo %}Ativa{% else %}Inativa{% endif %}
                                </span>
                            </td>
                            <td>
                                <a href="{% url 'editar_turma' turma.id %}" class="btn btn-sm btn-outline-primary" title="Editar">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="{% url 'detalhe_turma' turma.id %}" class="btn btn-sm btn-outline-info" title="Ver">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a href="{% url 'deletar_turma' turma.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Tem certeza?')" title="Deletar">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="6" class="text-center text-muted py-4">
                                Nenhuma turma encontrada.
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Mobile Cards -->
<div class="mobile-cards">
    {% for turma in turmas %}
        <div class="turma-card">
            <div class="turma-header">
                <strong>{{ turma.nome }}</strong>
                <span class="badge {% if turma.ativo %}status-active{% else %}status-inactive{% endif %}">
                    {% if turma.ativo %}Ativa{% else %}Inativa{% endif %}
                </span>
            </div>
            <div class="turma-body">
                <div class="turma-info">
                    <span class="info-label">Monitor:</span>
                    <span class="info-value">{{ turma.monitor.nome }}</span>
                </div>
                <div class="turma-info">
                    <span class="info-label">Sala:</span>
                    <span class="info-value">{{ turma.sala.numero }}</span>
                </div>
                <div class="turma-info">
                    <span class="info-label">Período:</span>
                    <span class="info-value">{{ turma.data_inicio|date:"d/m/Y" }} até {{ turma.data_fim|date:"d/m/Y" }}</span>
                </div>
                <div class="turma-info">
                    <span class="info-label">Horário:</span>
                    <span class="info-value">{{ turma.horario }}</span>
                </div>
            </div>
            <div class="turma-actions">
                <a href="{% url 'editar_turma' turma.id %}" class="btn btn-sm btn-outline-primary">
                    <i class="fas fa-edit"></i> Editar
                </a>
                <a href="{% url 'detalhe_turma' turma.id %}" class="btn btn-sm btn-outline-info">
                    <i class="fas fa-eye"></i> Ver
                </a>
                <a href="{% url 'deletar_turma' turma.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Tem certeza?')">
                    <i class="fas fa-trash"></i> Deletar
                </a>
            </div>
        </div>
    {% empty %}
        <div class="text-center text-muted py-5">
            <i class="fas fa-inbox fa-3x mb-3" style="opacity: 0.3;"></i>
            <p>Nenhuma turma encontrada.</p>
        </div>
    {% endfor %}
</div>
{% endblock %}
